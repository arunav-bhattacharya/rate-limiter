quarkus:
  live-reload:
    enabled: false
  datasource:
    db-kind: oracle
    username: ${DB_USERNAME:rate_limiter}
    password: ${DB_PASSWORD:rate_limiter}
    jdbc:
      url: ${DB_URL:jdbc:oracle:thin:@localhost:1521/ORCLPDB1}
      min-size: 5
      max-size: 30
      acquisition-timeout: 5S

  flyway:
    migrate-at-start: true
    locations: db/migration

  log:
    category:
      "com.payments.ratelimiter":
        level: DEBUG
      "org.jetbrains.exposed":
        level: INFO

rate-limiter:
  default-config-name: default
  headroom-windows: 100
  max-inflight-assignments: 25
  inflight-acquire-timeout-ms: 50
  max-request-ahead-minutes: 60
  horizon-extension-buffer-minutes: 5

# Test profile â€” longer timeouts for Oracle XE under ARM emulation
"%test":
  quarkus:
    datasource:
      jdbc:
        acquisition-timeout: 60S
    flyway:
      clean-at-start: true
  rate-limiter:
    max-inflight-assignments: 200
    inflight-acquire-timeout-ms: 500
